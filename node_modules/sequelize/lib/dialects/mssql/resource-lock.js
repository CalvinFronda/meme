'use strict';

const Promise = require('../../promise');

<<<<<<< HEAD
function ResourceLock(resource) {
  this.resource = resource;
  this.previous = Promise.resolve(resource);
}

ResourceLock.prototype.unwrap = function() {
  return this.resource;
};

ResourceLock.prototype.lock = function() {
  const lock = this.previous;
  let resolve;

  this.previous = new Promise(r => {
    resolve = r;
  });

  return lock.disposer(resolve);
};
=======
class ResourceLock {
  constructor(resource) {
    this.resource = resource;
    this.previous = Promise.resolve(resource);
  }

  unwrap() {
    return this.resource;
  }

  lock() {
    const lock = this.previous;
    let resolve;
    this.previous = new Promise(r => {
      resolve = r;
    });
    return lock.disposer(resolve);
  }
}
>>>>>>> 5214b58b8509a187fd89faa6656d6c83be0724dd

module.exports = ResourceLock;
